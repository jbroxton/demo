# Test info

- Name: AI Pipeline Integration Test >> should trigger pipeline and return pages data (126 features vs 8 legacy)
- Location: /Users/delaghetto/Documents/Projects/demo/tests/e2e/ai-pipeline-integration.spec.ts:4:7

# Error details

```
Error: page.fill: Test timeout of 30000ms exceeded.
Call log:
  - waiting for locator('[data-testid="email-input"], input[name="email"], input[type="email"]')

    at /Users/delaghetto/Documents/Projects/demo/tests/e2e/ai-pipeline-integration.spec.ts:12:16
```

# Page snapshot

```yaml
- alert
- img "Speqq Logo"
- text: Speqq Welcome, Sarah Chen
- button "Logout"
- list:
  - listitem:
    - button "Search"
  - listitem:
    - button "Goals"
  - listitem:
    - button "Approvals"
  - listitem:
    - button "Launches"
  - listitem:
    - button "Roadmap"
  - listitem:
    - button "Feedback"
- text: Pages
- button "Clear cache and refresh pages":
  - img
- button "Add Feature (right-click for more options)"
- list:
  - listitem:
    - button "Expand"
    - button "New Feature [assignee1]"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "Status Test Feedback"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "Persistent Feedback"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "Login Security Issue"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "Login Security Issue"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "DB Test 124777777"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap [Assign]"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Project"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "TEST"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "TESTTTTTTTTTTTTT"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "Content Type"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Collapse" [expanded]
    - button "Authentication Platform"
    - button "Add Page"
    - list:
      - listitem:
        - button "User Authentication 1"
      - listitem:
        - button "New Project"
      - listitem:
        - button "New Feature"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "Test Project"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Release"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Collapse" [expanded]
    - button "Complex Block Structure Test"
    - button "Add Page"
    - list:
      - listitem:
        - button "New Feature"
      - listitem:
        - button "New Feature"
      - listitem:
        - button "New Feature"
      - listitem:
        - button "New Feature"
      - listitem:
        - button "New Feature 1"
      - listitem:
        - button "New Feature"
      - listitem:
        - button "New Feature"
      - listitem:
        - button "New Feature"
  - listitem:
    - button "Expand"
    - button "New Release"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Roadmap"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page 1"
    - button "Add Page"
  - listitem:
    - button "Collapse" [expanded]
    - button "New Page"
    - button "Add Page"
    - list:
      - listitem:
        - button "New Feature"
      - listitem:
        - button "New Feature"
  - listitem:
    - button "Collapse" [expanded]
    - button "New Page"
    - button "Add Page"
    - list:
      - listitem:
        - button "New Feature"
      - listitem:
        - button "New Feature"
      - listitem:
        - button "New Feature"
  - listitem:
    - button "Expand"
    - button "[test] New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "Tab Title 1748620974850"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "Tab Title 1748620998990"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page 1"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page 6"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Paf"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "Content Test"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "This is my new page"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
  - listitem:
    - button "Expand"
    - button "New Feature"
    - button "Add Page"
- text: Products
- button "Add Product"
- list:
  - listitem:
    - button "Expand"
    - button "ShopFlow Mobile App"
    - button "Add Interface"
  - listitem:
    - button "Expand"
    - button "E-commerce Web Platform"
    - button "Add Interface"
  - listitem:
    - button "Expand"
    - button "Merchant Dashboard"
    - button "Add Interface"
- button "Settings"
- button "Trash"
- button "Collapse navigator"
- button "Scroll tabs right"
- tablist:
  - tab "Untitled Feedback"
  - button "Edit Untitled Feedback name"
  - button "Close Untitled Feedback tab"
  - tab "Untitled Feedback"
  - button "Edit Untitled Feedback name"
  - button "Close Untitled Feedback tab"
  - tab "Untitled Feedback"
  - button "Edit Untitled Feedback name"
  - button "Close Untitled Feedback tab"
  - tab "Test Feedback Item"
  - button "Edit Test Feedback Item name"
  - button "Close Test Feedback Item tab"
  - tab "New Feature"
  - button "Edit New Feature name"
  - button "Close New Feature tab"
  - tab "Roadmaps"
  - button "Edit Roadmaps name"
  - button "Close Roadmaps tab"
  - tab "New Feature"
  - button "Edit New Feature name"
  - button "Close New Feature tab"
  - tab "Login Security Issue" [selected]
  - button "Edit Login Security Issue name"
  - button "Close Login Security Issue tab"
  - tab "Persistent Feedback"
  - button "Edit Persistent Feedback name"
  - button "Close Persistent Feedback tab"
- textbox "New Page": Login Security Issue
- text: feature
- button "Save"
- button "Add Block"
- button "Details"
- button "Delete"
- button
- button
- button
- button
- button
- button
- button
- button
- button
- button
- button
- button
- button
- button
- button
- button
- button [disabled]
- button [disabled]
- paragraph
- paragraph
- paragraph: hthth
- table:
  - rowgroup:
    - row:
      - cell:
        - paragraph
      - cell:
        - paragraph
      - cell:
        - paragraph
    - row:
      - cell:
        - paragraph
      - cell:
        - paragraph
      - cell:
        - paragraph
    - row:
      - cell:
        - paragraph
      - cell:
        - paragraph
      - cell:
        - paragraph
- button "AI Chat"
- button "TODO"
- text: Hi! I'm your Product Management Assistant. How can I help you today?
- button "@ Add context"
- textbox "Ask about your products..."
- button "RAG"
- button "Ask"
- button "Agent"
- text: GPT-4
- button "Send" [disabled]
- region "Notifications alt+T"
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 |
   3 | test.describe('AI Pipeline Integration Test', () => {
   4 |   test('should trigger pipeline and return pages data (126 features vs 8 legacy)', async ({ page }) => {
   5 |     console.log('🧪 Starting AI Pipeline Integration Test');
   6 |     
   7 |     // Step 1: Navigate to signin page
   8 |     await page.goto('/signin');
   9 |     
   10 |     // Step 2: Login with test credentials
   11 |     console.log('🔐 Logging in with test credentials...');
>  12 |     await page.fill('[data-testid="email-input"], input[name="email"], input[type="email"]', 'pm1@test.com');
      |                ^ Error: page.fill: Test timeout of 30000ms exceeded.
   13 |     await page.fill('[data-testid="password-input"], input[name="password"], input[type="password"]', 'password');
   14 |     
   15 |     // Click signin button (try multiple selectors)
   16 |     const signinButton = page.locator('button:has-text("Sign"), button:has-text("Login"), button[type="submit"]').first();
   17 |     await signinButton.click();
   18 |     
   19 |     // Wait for redirect after login
   20 |     await page.waitForURL(/\/dashboard|\//, { timeout: 10000 });
   21 |     console.log('✅ Login successful');
   22 |     
   23 |     // Step 3: Navigate to AI Chat
   24 |     console.log('🤖 Navigating to AI Chat...');
   25 |     
   26 |     // Try different ways to get to AI chat
   27 |     try {
   28 |       // Look for AI Chat navigation link
   29 |       const aiChatLink = page.locator('nav a:has-text("AI Chat"), a:has-text("Chat"), [href*="chat"]').first();
   30 |       if (await aiChatLink.isVisible({ timeout: 2000 })) {
   31 |         await aiChatLink.click();
   32 |       } else {
   33 |         // Fallback: navigate directly to AI chat URL
   34 |         await page.goto('/ai-chat');
   35 |       }
   36 |     } catch (error) {
   37 |       console.log('⚠️  Navigation fallback, going directly to AI chat');
   38 |       await page.goto('/ai-chat');
   39 |     }
   40 |     
   41 |     console.log('📍 Current URL:', page.url());
   42 |     
   43 |     // Step 4: Wait for AI chat interface to load
   44 |     console.log('⏳ Waiting for AI chat interface...');
   45 |     
   46 |     // Look for common chat interface elements
   47 |     const chatInput = page.locator('textarea, input[placeholder*="message"], input[placeholder*="chat"], [data-testid*="message"], [data-testid*="chat"]').first();
   48 |     await chatInput.waitFor({ timeout: 10000 });
   49 |     
   50 |     console.log('✅ AI chat interface loaded');
   51 |     
   52 |     // Step 5: Clear any existing content and send test message
   53 |     console.log('💬 Sending test message...');
   54 |     
   55 |     const testMessage = 'How many features do I have?';
   56 |     
   57 |     await chatInput.clear();
   58 |     await chatInput.fill(testMessage);
   59 |     
   60 |     // Look for send button
   61 |     const sendButton = page.locator('button:has-text("Send"), button[type="submit"], [data-testid*="send"]').first();
   62 |     await sendButton.click();
   63 |     
   64 |     console.log('📤 Message sent, waiting for AI response...');
   65 |     
   66 |     // Step 6: Wait for AI response
   67 |     // This is the critical part - we need to wait for the pipeline to complete
   68 |     
   69 |     let responseReceived = false;
   70 |     let aiResponseText = '';
   71 |     let attempts = 0;
   72 |     const maxAttempts = 30; // 30 seconds max wait
   73 |     
   74 |     while (!responseReceived && attempts < maxAttempts) {
   75 |       try {
   76 |         // Look for response elements (various possible selectors)
   77 |         const responseElements = page.locator([
   78 |           '[data-testid*="response"]',
   79 |           '[data-testid*="message"]',
   80 |           '.ai-response',
   81 |           '.assistant-message',
   82 |           '[role="assistant"]',
   83 |           'div:has-text("features")',
   84 |           'div:has-text("126")',
   85 |           'div:has-text("feature")'
   86 |         ].join(', '));
   87 |         
   88 |         const responseCount = await responseElements.count();
   89 |         
   90 |         if (responseCount > 0) {
   91 |           // Get the latest response
   92 |           const latestResponse = responseElements.last();
   93 |           const responseText = await latestResponse.textContent();
   94 |           
   95 |           if (responseText && responseText.length > 10 && responseText.includes('feature')) {
   96 |             aiResponseText = responseText;
   97 |             responseReceived = true;
   98 |             console.log('✅ AI response received');
   99 |             break;
  100 |           }
  101 |         }
  102 |         
  103 |         // Also check for any text that might contain numbers
  104 |         const pageText = await page.textContent('body');
  105 |         if (pageText && pageText.includes('feature') && /\d+/.test(pageText)) {
  106 |           const matches = pageText.match(/(\d+).*?feature/gi);
  107 |           if (matches && matches.length > 0) {
  108 |             aiResponseText = pageText;
  109 |             responseReceived = true;
  110 |             console.log('✅ AI response found in page content');
  111 |             break;
  112 |           }
```